---
title: "Great Tennis players"
author: "Erik Schulte"
date: "June 17th 2022"
# date: "`r Sys.Date()`"
bibliography: Tex/ref.bib       # Do not edit: Keep this naming convention and location.
output:
  pagedown::html_paged:
    # template: wp_paged.html
    # css: ['wp.css', 'wp-fonts.css', 'wp-page.css']
    css: ["Template/default-fonts-Texevier.css", "Template/default-page-Texevier.css", "Template/default-Texevier.css"]
    csl: Template/harvard-stellenbosch-university.csl # referencing format used.
    template: ["Template/paged-Texevier.html"]

    toc: true
    # change to true for a self-contained document, but it'll be a litte slower for Pandoc to render
    self_contained: TRUE
abstract: |
   What determines success in tennis?

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, fig.width = 6, fig.height = 5, fig.pos="H", fig.pos = 'H')

if(!require("tidyverse")) install.packages("tidyverse")
library(tidyverse)

list.files('code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))

datcolatplayers <- Data_Collating(Datroot = "data/players/")  
datcolat1 <- Data_Collating(Datroot = "data/rankings/")   

#rename matching variable
datcolat1 <- rename(datcolat1, player_id = player)

#now matched players and the ranking....
playerranking <- merge(datcolat1,datcolatplayers,by="player_id")

#datcolat2 <- Data_Collating(Datroot = "data/Tennis_single_atp/")   



####atp tournaments...

#datcolat <- Data_Collating(Datroot = "data/Tennis/") 


```

# Overview.


The great function \textit{Data Collating} does not work for the whole data folder due to the error message: "Error in `bind_rows()`:
! Can't combine `winner_seed` <double> and `winner_seed` <character>.
Run `rlang::last_error()` to see where the error occurred."

Therefore, I tried to apply to parts of the csv files that may have a similar internal structure. Indeed, it works for the ranking files which also have a player id variable. The player csv file, which contains more than 50.000 tennis players with id's can then be merged with the ranking, which I did.